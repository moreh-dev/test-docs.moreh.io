"use strict";(self.webpackChunkmif_docs=self.webpackChunkmif_docs||[]).push([[8328],{2162(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"getting-started/prerequisites","title":"Prerequisites","description":"This document introduces the prerequisites for the MoAI Inference Framework and provides instructions on how to install them.","source":"@site/docs/getting-started/prerequisites.mdx","sourceDirName":"getting-started","slug":"/getting-started/prerequisites","permalink":"/dev/getting-started/prerequisites","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Prerequisites","sidebar_position":1},"sidebar":"docs","next":{"title":"Quickstart","permalink":"/dev/getting-started/quickstart"}}');var t=r(4848),s=r(8453),i=r(9489),o=r(7227);const l={title:"Prerequisites",sidebar_position:1},c=void 0,d={},u=[{value:"Target system",id:"target-system",level:2},{value:"cert-manager",id:"cert-manager",level:2},{value:"moai-inference-framework",id:"moai-inference-framework",level:2},{value:"moai-inference-preset",id:"moai-inference-preset",level:2},{value:"AMD GPU operator",id:"amd-gpu-operator",level:2},{value:"RDMA device plugin",id:"rdma-device-plugin",level:2},{value:"Host driver and OFED installation",id:"host-driver-and-ofed-installation",level:3},{value:"RDMA device plugin installation",id:"rdma-device-plugin-installation",level:3},{value:"Node labeling for heterogeneous accelerators",id:"node-labeling-for-heterogeneous-accelerators",level:2},{value:"Gateway",id:"gateway",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This document introduces the prerequisites for the MoAI Inference Framework and provides instructions on how to install them."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"To follow this document, you need to understand the configuration of the Kubernetes cluster where the MoAI Inference Framework will be installed. Since Moreh provides support for installing the MoAI Inference Framework at customer sites, if you encounter any difficulties, you can request assistance from the Moreh team."})}),"\n",(0,t.jsx)(n.h2,{id:"target-system",children:"Target system"}),"\n",(0,t.jsx)(n.p,{children:"To install the MoAI Inference Framework, you must have"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Kubernetes 1.29 or later"}),"\n",(0,t.jsx)(n.li,{children:"At least one worker node equipped with accelerators supported by the MoAI Inference Framework (e.g., AMD GPUs)"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cluster-admin"})," privilege for the Kubernetes cluster"]}),"\n",(0,t.jsx)(n.li,{children:"A StorageClass defined in the Kubernetes cluster (required for storing the monitoring metrics, model weights, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"A Docker private registry accessible from the Kubernetes cluster"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cert-manager",children:"cert-manager"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://cert-manager.io/",children:"cert-manager"})," is a powerful and extensible X.509 certificate controller for Kubernetes workloads. It is essential for managing TLS certificates within the MoAI Inference Framework."]}),"\n",(0,t.jsxs)(n.p,{children:["Deploy ",(0,t.jsx)(n.code,{children:"cert-manager"})," using the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i cert-manager oci://quay.io/jetstack/charts/cert-manager \\\n    --version v1.18.4 \\\n    -n cert-manager \\\n    --create-namespace \\\n    --set crds.enabled=true\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"moai-inference-framework",children:"moai-inference-framework"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"moai-inference-framework"})," Helm chart deploys the dependencies required by the MoAI Inference Framework, excluding GPU and network-related components. To deploy it, you first need to add Moreh's Helm chart repository."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm repo add moreh https://moreh-dev.github.io/helm-charts\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you have already added the repository, make sure to update it."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm repo update moreh\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The container images for the MoAI Inference Framework are distributed through a private repository on ",(0,t.jsx)(n.a,{href:"https://aws.amazon.com/ecr/",children:"Amazon ECR"})," ",(0,t.jsx)(n.code,{children:"255250787067.dkr.ecr.ap-northeast-2.amazonaws.com"}),", and you need to obtain an authorization token to download them. To facilitate this, the ",(0,t.jsx)(n.code,{children:"moai-inference-framework"})," chart defines the installation of an ECR token refresher. You need to specify your AWS credentials in the values file to configure the ECR token refresher."]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["The AWS credentials (",(0,t.jsx)(n.code,{children:"AWS_ACCESS_KEY_ID"})," and ",(0,t.jsx)(n.code,{children:"AWS_SECRET_ACCESS_KEY"}),") should have been provided to you along with your purchase or trial issuance of the MoAI Inference Framework"]}),". If you did not receive this information, please contact your point of purchase separately."]})}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"moai-inference-framework-values.yaml"})," file as follows. ",(0,t.jsxs)(n.strong,{children:["You need to replace ",(0,t.jsx)(n.code,{children:"<AWS_ACCESS_KEY_ID>"})," and ",(0,t.jsx)(n.code,{children:"<AWS_SECRET_ACCESS_KEY>"})," with your own values"]}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="moai-inference-framework-values.yaml" {3-4}',children:"ecrTokenRefresher:\n  aws:\n    accessKeyId: <AWS_ACCESS_KEY_ID>\n    secretAccessKey: <AWS_SECRET_ACCESS_KEY>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In addition, if dependencies such as keda, kube-prometheus-stack, lws are already installed in your cluster, you should skip their installation by setting the corresponding values to ",(0,t.jsx)(n.code,{children:"false"})," in the ",(0,t.jsx)(n.code,{children:"moai-inference-framework-values.yaml"})," file. Refer to ",(0,t.jsx)(n.a,{href:"https://github.com/moreh-dev/mif/tree/main/deploy/helm/moai-inference-framework",children:"moai-inference-framework README"})," to see the full list of dependencies."]}),"\n",(0,t.jsxs)(n.p,{children:["Then, deploy the ",(0,t.jsx)(n.code,{children:"moai-inference-framework"})," chart using the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i mif moreh/moai-inference-framework \\\n    --version v0.3.0 \\\n    -n mif \\\n    --create-namespace \\\n    -f moai-inference-framework-values.yaml\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"moai-inference-preset",children:"moai-inference-preset"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"moai-inference-preset"})," Helm chart deploys the presets for the MoAI Inference Framework. The presets define preconfigured ways to run inference containers (e.g., Moreh vLLM containers) in the MoAI Inference Framework."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i moai-inference-preset moreh/moai-inference-preset \\\n    --version v0.3.0 \\\n    -n mif\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"amd-gpu-operator",children:"AMD GPU operator"}),"\n",(0,t.jsxs)(n.p,{children:["This section describes how to set up the AMD GPU Operator on a Kubernetes cluster. See ",(0,t.jsx)(n.a,{href:"https://instinct.docs.amd.com/projects/gpu-operator/en/release-v1.4.0/installation/kubernetes-helm.html",children:"AMD GPU Operator / Kubernetes (Helm)"})," for more details."]}),"\n",(0,t.jsx)(n.p,{children:"Add the ROCm's GPU Operator Helm chart repository."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm repo add rocm https://rocm.github.io/gpu-operator\nhelm repo update rocm\n"})}),"\n",(0,t.jsx)(n.p,{children:"Create a namespace for the AMD GPU Operator."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl create namespace amd-gpu\n"})}),"\n",(0,t.jsxs)(n.p,{children:["During the installation of the AMD GPU Operator, the GPU driver image needs to be built and pushed to a Docker registry. For more details, see ",(0,t.jsx)(n.a,{href:"https://instinct.docs.amd.com/projects/gpu-operator/en/release-v1.4.0/drivers/precompiled-driver.html",children:"AMD GPU Operator / Preparing Pre-compiled Driver Images"}),'. The private registry mentioned earlier in the "target system" section can be used for this purpose.']}),"\n",(0,t.jsxs)(n.p,{children:["Create a Docker registry secret in the ",(0,t.jsx)(n.code,{children:"amd-gpu"})," namespace to enable access to the private registry. ",(0,t.jsxs)(n.strong,{children:["Set the ",(0,t.jsx)(n.code,{children:"<registry>"}),", ",(0,t.jsx)(n.code,{children:"<username>"}),", and ",(0,t.jsx)(n.code,{children:"<password>"})," values to the information for your private registry"]}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",metastring:"{3-5}",children:"kubectl create secret -n amd-gpu \\\n    docker-registry private-registry \\\n    --docker-server=<registry> \\\n    --docker-username=<username> \\\n    --docker-password=<password>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then, create a ",(0,t.jsx)(n.code,{children:"gpu-operator-values.yaml"})," file with the following content. ",(0,t.jsxs)(n.strong,{children:["Please replace ",(0,t.jsx)(n.code,{children:"<registry>"})," on line 7 with the URL of your private registry"]}),". You may also change the image name ",(0,t.jsx)(n.code,{children:"amdgpu-driver"}),", if necessary, according to your private registry's policies."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="gpu-operator-values.yaml" {7}',children:'deviceConfig:\n  spec:\n    driver:\n      enable: true\n      version: "6.4.3"\n      blacklist: true\n      image: "<registry>/amdgpu-driver"\n      imageRegistrySecret:\n        name: private-registry\n      imageRegistryTLS:\n        insecure: false\n        insecureSkipTLSVerify: false\n      tolerations: &tolerations\n        - key: amd.com/gpu\n          operator: Exists\n          effect: NoSchedule\n    devicePlugin:\n      devicePluginTolerations: *tolerations\n    metricsExporter:\n      prometheus:\n        serviceMonitor:\n          enable: true\n          interval: 10s\n          labels:\n            release: mif\n      tolerations: *tolerations\n\nnode-feature-discovery:\n  worker:\n    tolerations: *tolerations\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["If the AMD GPU Operator is already installed on your system, verify that the toleration key is set to ",(0,t.jsx)(n.code,{children:"amd.com/gpu"}),". MoAI Inference Framework assumes this name."]})}),"\n",(0,t.jsx)(n.p,{children:"You can install the AMD GPU Operator as follows."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i gpu-operator rocm/gpu-operator-charts \\\n    --version v1.4.0 \\\n    -n amd-gpu \\\n    -f gpu-operator-values.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"Note that installing the operator and GPU driver may take some time. After the installation is complete, you can verify that the gpu-operator pods are running using the following command."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl get pods -n amd-gpu\n"})}),"\n",(0,t.jsx)(n.p,{children:"Expected output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"NAME                                                              READY   STATUS    RESTARTS   AGE\ndefault-device-plugin-fxj66                                       1/1     Running   0          108s\ndefault-metrics-exporter-r2l6h                                    1/1     Running   0          108s\ndefault-node-labeller-qhqdl                                       1/1     Running   0          2m35s\ngpu-operator-gpu-operator-charts-controller-manager-69856dhd67k   1/1     Running   0          4m20s\ngpu-operator-kmm-controller-7b5dd7b48b-fpcv6                      1/1     Running   0          4m20s\ngpu-operator-kmm-webhook-server-c7bfc864-tfqdb                    1/1     Running   0          4m20s\ngpu-operator-node-feature-discovery-gc-7649c47d5d-55rcn           1/1     Running   0          4m20s\ngpu-operator-node-feature-discovery-master-fc889959c-sx7wv        1/1     Running   0          4m20s\ngpu-operator-node-feature-discovery-worker-4tnns                  1/1     Running   0          4m20s\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["You can monitor the installation progress using the ",(0,t.jsx)(n.code,{children:"kubectl get pods -n amd-gpu -w"})," command instead."]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"rdma-device-plugin",children:"RDMA device plugin"}),"\n",(0,t.jsx)(n.h3,{id:"host-driver-and-ofed-installation",children:"Host driver and OFED installation"}),"\n",(0,t.jsxs)(n.p,{children:["You need to install the device drivers and OFED software for InfiniBand or RoCE NICs on the ",(0,t.jsx)(n.strong,{children:"host OS"}),". Follow the instructions provided by your hardware vendor."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"This must be completed before joining the node to the Kubernetes cluster"}),". By running the following command on the host OS, you can verify that the OFED software has been installed correctly and that it recognizes the NICs. If no devices are shown, there is an issue with the installation."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"ibv_devices\n"})}),"\n",(0,t.jsx)(n.p,{children:"Expected output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"device           node GUID\n<device_name>    <16-hex GUID>\n<device_name>    <16-hex GUID>\n...\n"})}),"\n",(0,t.jsx)(n.h3,{id:"rdma-device-plugin-installation",children:"RDMA device plugin installation"}),"\n",(0,t.jsxs)(n.p,{children:["This section describes how to install the ",(0,t.jsx)(n.strong,{children:"rdma-shared-device-plugin"}),". See ",(0,t.jsx)(n.a,{href:"https://github.com/Mellanox/k8s-rdma-shared-dev-plugin/blob/master/README.md",children:"k8s-rdma-shared-dev-plugin / README"})," for more details."]}),"\n",(0,t.jsxs)(n.p,{children:["First, create a ",(0,t.jsx)(n.code,{children:"rdma-shared-device-plugin.yaml"})," file as follows. ",(0,t.jsxs)(n.strong,{children:["You need to replace ",(0,t.jsx)(n.code,{children:"<device>"})," on line 21 with your RDMA NIC's network interface name"]}),". If multiple NICs are installed on the server, you must list all interface names (e.g., ",(0,t.jsx)(n.code,{children:'"devices": ["ib0", "ib1"]'}),")."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["You can check the network interface names using the ",(0,t.jsx)(n.code,{children:"ip addr"})," command."]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="rdma-shared-device-plugin.yaml" {21}',children:'---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: rdma-devices\n  namespace: kube-system\n  labels:\n    app.kubernetes.io/name: rdma-shared-device-plugin\n    app.kubernetes.io/version: v1.5.2\n    app.kubernetes.io/instance: rdma-shared-device-plugin\ndata:\n  config.json: |\n    {\n      "periodicUpdateInterval": 300,\n      "configList": [\n        {\n          "resourcePrefix": "mellanox",\n          "resourceName": "hca",\n          "rdmaHcaMax": 1000,\n          "devices": [\n            "<device>"\n          ]\n        }\n      ]\n    }\n\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: rdma-shared-device-plugin\n  namespace: kube-system\n  labels:\n    app.kubernetes.io/name: rdma-shared-device-plugin\n    app.kubernetes.io/version: v1.5.2\n    app.kubernetes.io/instance: rdma-shared-device-plugin\nspec:\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: rdma-shared-device-plugin\n      app.kubernetes.io/instance: rdma-shared-device-plugin\n  updateStrategy:\n    rollingUpdate:\n      maxUnavailable: "30%"\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: rdma-shared-device-plugin\n        app.kubernetes.io/version: v1.5.2\n        app.kubernetes.io/instance: rdma-shared-device-plugin\n    spec:\n      hostNetwork: true\n      priorityClassName: system-node-critical\n      tolerations:\n        - key: amd.com/gpu\n          operator: Exists\n          effect: NoSchedule\n      containers:\n        - name: device-plugin\n          image: ghcr.io/mellanox/k8s-rdma-shared-dev-plugin:v1.5.2\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            privileged: true\n          volumeMounts:\n            - name: device-plugin\n              mountPath: /var/lib/kubelet/device-plugins\n            - name: plugins-registry\n              mountPath: /var/lib/kubelet/plugins_registry\n            - name: config\n              mountPath: /k8s-rdma-shared-dev-plugin\n            - name: devs\n              mountPath: /dev/\n      volumes:\n        - name: device-plugin\n          hostPath:\n            path: /var/lib/kubelet/device-plugins\n        - name: plugins-registry\n          hostPath:\n            path: /var/lib/kubelet/plugins_registry\n        - name: config\n          configMap:\n            name: rdma-devices\n            items:\n              - key: config.json\n                path: config.json\n        - name: devs\n          hostPath:\n            path: /dev/\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["If the RDMA device plugin is already installed on your system, verify that the resource name is set to ",(0,t.jsx)(n.code,{children:"mellanox/hca"}),". MoAI Inference Framework assumes this name. This does not imply that the actual hardware vendor must be Mellanox."]})}),"\n",(0,t.jsx)(n.p,{children:"Then, create an rdma-shared-device-plugin DaemonSet using the following command."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f rdma-shared-device-plugin.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can verify that the rdma-shared-device-plugin pods are running using the following command."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl get pods -n kube-system -l app.kubernetes.io/instance=rdma-shared-device-plugin\n"})}),"\n",(0,t.jsx)(n.p,{children:"Expected output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"NAME                              READY   STATUS    RESTARTS   AGE\nrdma-shared-device-plugin-wh9fz   1/1     Running   0          7s\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"node-labeling-for-heterogeneous-accelerators",children:"Node labeling for heterogeneous accelerators"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"moai-accelerator"})," NodeFeatureRule enables the identification of heterogeneous accelerators by assigning vendor and model labels to nodes. This metadata facilitates targeted scheduling or automated selection of optimal accelerator. For a full list of supported hardware, please refer to ",(0,t.jsx)(n.a,{href:"/dev/reference/supported-devices",children:"supported devices"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Apply the ",(0,t.jsx)(n.code,{children:"moai-accelerator"})," NodeFeatureRule using the following command."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/moreh-dev/mif/refs/heads/main/config/nfd/moai-accelerator.yaml\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"gateway",children:"Gateway"}),"\n",(0,t.jsx)(n.p,{children:"Add the Gateway API and Gateway API Inference Extension CRDs."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl apply --server-side -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.3.0/standard-install.yaml\nkubectl apply -f https://github.com/kubernetes-sigs/gateway-api-inference-extension/releases/download/v1.1.0/manifests.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can verify the CRDs are installed using the following command."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl get crd | grep 'networking.k8s*.io'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Expected output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"gatewayclasses.gateway.networking.k8s.io            2025-12-12T02:03:07Z\ngateways.gateway.networking.k8s.io                  2025-12-12T02:03:07Z\ngrpcroutes.gateway.networking.k8s.io                2025-12-12T02:03:07Z\nhttproutes.gateway.networking.k8s.io                2025-12-12T02:03:07Z\ninferencepools.inference.networking.k8s.io          2025-12-12T02:03:08Z\nreferencegrants.gateway.networking.k8s.io           2025-12-12T02:03:07Z\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can use any gateway controller compatible with the Gateway API Inference Extension. using either ",(0,t.jsx)(n.strong,{children:"Istio"})," or ",(0,t.jsx)(n.strong,{children:"Kgateway"})," is recommended, and installation instructions for both are provided below."]}),"\n",(0,t.jsxs)(i.A,{groupId:"gateway-class",children:[(0,t.jsxs)(o.A,{value:"istio",label:"Istio (Default)",default:!0,children:[(0,t.jsx)(n.p,{children:"Add the Istio Helm chart repository."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm repo add istio https://istio-release.storage.googleapis.com/charts\nhelm repo update istio\n"})}),(0,t.jsx)(n.p,{children:"Install the Istio base chart."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i istio-base istio/base \\\n    --version 1.28.3 \\\n    -n istio-system \\\n    --create-namespace\n"})}),(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"istiod-values.yaml"})," file and install the Istio control plane."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="istiod-values.yaml"',children:'pilot:\n  env:\n    PILOT_ENABLE_ALPHA_GATEWAY_API: "true"\n    ENABLE_GATEWAY_API_INFERENCE_EXTENSION: "true"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i istiod istio/istiod \\\n    --version 1.28.3 \\\n    -n istio-system \\\n    -f istiod-values.yaml\n"})})]}),(0,t.jsxs)(o.A,{value:"kgateway",label:"Kgateway",children:[(0,t.jsx)(n.p,{children:"Install the Kgateway CRDs."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i kgateway-crds oci://cr.kgateway.dev/kgateway-dev/charts/kgateway-crds \\\n    --version v2.1.1 \\\n    -n kgateway-system \\\n    --create-namespace\n"})}),(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"kgateway-values.yaml"})," file and install the Kgateway controller."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="kgateway-values.yaml"',children:"inferenceExtension:\n  enabled: true\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"helm upgrade -i kgateway oci://cr.kgateway.dev/kgateway-dev/charts/kgateway \\\n    --version v2.1.1 \\\n    -n kgateway-system \\\n    -f kgateway-values.yaml\n"})})]})]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},7227(e,n,r){r.d(n,{A:()=>i});r(6540);var a=r(4164);const t="tabItem_Ymn6";var s=r(4848);function i(e){var n=e.children,r=e.hidden,i=e.className;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(t,i),hidden:r,children:n})}},9489(e,n,r){r.d(n,{A:()=>A});var a=r(6540),t=r(4164),s=r(8630),i=r(4245),o=r(6347),l=r(6494),c=r(2814),d=r(5167),u=r(9900);function h(e){var n,r;return null!=(n=null==(r=a.Children.toArray(e).filter(function(e){return"\n"!==e}).map(function(e){if(!e||(0,a.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:r.filter(Boolean))?n:[]}function p(e){var n=e.values,r=e.children;return(0,a.useMemo)(function(){var e=null!=n?n:function(e){return h(e).map(function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}})}(r);return function(e){var n=(0,d.XI)(e,function(e,n){return e.value===n.value});if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map(function(e){return e.value}).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[n,r])}function m(e){var n=e.value;return e.tabValues.some(function(e){return e.value===n})}function g(e){var n=e.queryString,r=void 0!==n&&n,t=e.groupId,s=(0,o.W6)(),i=function(e){var n=e.queryString,r=void 0!==n&&n,a=e.groupId;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:r,groupId:t});return[(0,c.aZ)(i),(0,a.useCallback)(function(e){if(i){var n=new URLSearchParams(s.location.search);n.set(i,e),s.replace(Object.assign({},s.location,{search:n.toString()}))}},[i,s])]}function f(e){var n,r,t,s,i=e.defaultValue,o=e.queryString,c=void 0!==o&&o,d=e.groupId,h=p(e),f=(0,a.useState)(function(){return function(e){var n,r=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!m({value:r,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+r+'" but none of its children has the corresponding value. Available values are: '+a.map(function(e){return e.value}).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return r}var t=null!=(n=a.find(function(e){return e.default}))?n:a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:i,tabValues:h})}),v=f[0],x=f[1],j=g({queryString:c,groupId:d}),y=j[0],b=j[1],w=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),r=(0,u.Dv)(n),t=r[0],s=r[1],[t,(0,a.useCallback)(function(e){n&&s.set(e)},[n,s])]),k=w[0],A=w[1],I=function(){var e=null!=y?y:k;return m({value:e,tabValues:h})?e:null}();return(0,l.A)(function(){I&&x(I)},[I]),{selectedValue:v,selectValue:(0,a.useCallback)(function(e){if(!m({value:e,tabValues:h}))throw new Error("Can't select invalid tab value="+e);x(e),b(e),A(e)},[b,A,h]),tabValues:h}}var v=r(1062);const x="tabList__CuJ",j="tabItem_LNqP";var y=r(4848);function b(e){var n=e.className,r=e.block,a=e.selectedValue,s=e.selectValue,o=e.tabValues,l=[],c=(0,i.a_)().blockElementScrollPositionUntilNextRender,d=function(e){var n=e.currentTarget,r=l.indexOf(n),t=o[r].value;t!==a&&(c(n),s(t))},u=function(e){var n,r=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,t=l.indexOf(e.currentTarget)+1;r=null!=(a=l[t])?a:l[0];break;case"ArrowLeft":var s,i=l.indexOf(e.currentTarget)-1;r=null!=(s=l[i])?s:l[l.length-1]}null==(n=r)||n.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":r},n),children:o.map(function(e){var n=e.value,r=e.label,s=e.attributes;return(0,y.jsx)("li",Object.assign({role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:function(e){l.push(e)},onKeyDown:u,onClick:d},s,{className:(0,t.A)("tabs__item",j,null==s?void 0:s.className,{"tabs__item--active":a===n}),children:null!=r?r:n}),n)})})}function w(e){var n=e.lazy,r=e.children,s=e.selectedValue,i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){var o=i.find(function(e){return e.props.value===s});return o?(0,a.cloneElement)(o,{className:(0,t.A)("margin-top--md",o.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:i.map(function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})})})}function k(e){var n=f(e);return(0,y.jsxs)("div",{className:(0,t.A)(s.G.tabs.container,"tabs-container",x),children:[(0,y.jsx)(b,Object.assign({},n,e)),(0,y.jsx)(w,Object.assign({},n,e))]})}function A(e){var n=(0,v.A)();return(0,y.jsx)(k,Object.assign({},e,{children:h(e.children)}),String(n))}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>o});var a=r(6540);const t={},s=a.createContext(t);function i(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);