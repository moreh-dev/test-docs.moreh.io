<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v0.0.0 docs-doc-page docs-doc-id-benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput | Moreh</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://test-docs.moreh.io/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v0.0.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v0.0.0"><meta data-rh="true" name="docsearch:version" content="v0.0.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v0.0.0"><meta data-rh="true" property="og:title" content="DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput | Moreh"><meta data-rh="true" name="description" content="This article presents the performance evaluation method and results of DeepSeek R1 671B inference on 5x AMD MI300X servers (40 GPUs in total)."><meta data-rh="true" property="og:description" content="This article presents the performance evaluation method and results of DeepSeek R1 671B inference on 5x AMD MI300X servers (40 GPUs in total)."><link data-rh="true" rel="icon" href="/moreh-icon.png"><link data-rh="true" rel="canonical" href="https://test-docs.moreh.io/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/"><link data-rh="true" rel="alternate" href="https://test-docs.moreh.io/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/" hreflang="en"><link data-rh="true" rel="alternate" href="https://test-docs.moreh.io/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Benchmarking","item":"https://test-docs.moreh.io/benchmarking"},{"@type":"ListItem","position":2,"name":"DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput","item":"https://test-docs.moreh.io/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput"}]}</script><link rel="stylesheet" href="/assets/css/styles.d347868e.css">
<script src="/assets/js/runtime~main.68118f1f.js" defer="defer"></script>
<script src="/assets/js/main.7d4cef61.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/moreh-logo.svg" alt="Moreh logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/moreh-logo-white.svg" alt="Moreh logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/">v0.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/dev/getting-started/prerequisites/">Dev ðŸš§</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/">v0.0.0</a></li></ul></div><a href="https://moreh.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/moreh-dev/mif" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-v0.0.0"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Home" class="linkLabel_WmDU">Home</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/getting-started/"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/overview/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/prerequisites/"><span title="Prerequisites" class="linkLabel_WmDU">Prerequisites</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/quickstart/"><span title="Quickstart" class="linkLabel_WmDU">Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/monitoring/"><span title="Monitoring" class="linkLabel_WmDU">Monitoring</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/supported_devices/"><span title="Supported devices" class="linkLabel_WmDU">Supported devices</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/benchmarking/"><span title="Benchmarking" class="categoryLinkLabel_W154">Benchmarking</span></a><button aria-label="Collapse sidebar category &#x27;Benchmarking&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/benchmarking/deepseek_r1_671b_on_amd_mi300x_gpus_maximum_throughput/"><span title="DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput" class="linkLabel_WmDU">DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/benchmarking/more_benchmarking_for_deepseek_r1_671b_on_amd_mi300x_gpus/performance_with_prefix_cache_and_load_aware_routing/"><span title="More benchmarking for DeepSeek R1 671B on AMD MI300X GPUs" class="categoryLinkLabel_W154">More benchmarking for DeepSeek R1 671B on AMD MI300X GPUs</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/benchmarking/more_benchmarking_for_deepseek_r1_671b_on_amd_mi300x_gpus/performance_with_prefix_cache_and_load_aware_routing/"><span title="Performance with prefix cache- and load-aware routing" class="linkLabel_WmDU">Performance with prefix cache- and load-aware routing</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/features/"><span title="Features" class="categoryLinkLabel_W154">Features</span></a><button aria-label="Collapse sidebar category &#x27;Features&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/preset/"><span title="Presets" class="linkLabel_WmDU">Presets</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/prefill_decode_disaggregation/"><span title="Prefill-decode disaggregation" class="linkLabel_WmDU">Prefill-decode disaggregation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/expert_parallelism/"><span title="Expert parallelism" class="linkLabel_WmDU">Expert parallelism</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/prefix_cache_aware_routing/"><span title="Prefix cache-aware routing" class="linkLabel_WmDU">Prefix cache-aware routing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/load_aware_routing/"><span title="Load-aware routing" class="linkLabel_WmDU">Load-aware routing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/features/auto_scaling/"><span title="Auto-scaling" class="linkLabel_WmDU">Auto-scaling</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/best-practices/"><span title="Best practices" class="categoryLinkLabel_W154">Best practices</span></a><button aria-label="Collapse sidebar category &#x27;Best practices&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/best_practices/resource_allocation/"><span title="Resource allocation" class="linkLabel_WmDU">Resource allocation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/best_practices/hf_model_management_with_pv/"><span title="Hugging Face model management with persistent volume" class="linkLabel_WmDU">Hugging Face model management with persistent volume</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/reference/"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Collapse sidebar category &#x27;Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/heimdall_scheduler/"><span title="Heimdall scheduler" class="linkLabel_WmDU">Heimdall scheduler</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/odin_inference_service/"><span title="Odin inference service" class="linkLabel_WmDU">Odin inference service</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/benchmarking/"><span>Benchmarking</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v0.0.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DeepSeek R1 671B on AMD MI300X GPUs: Maximum throughput</h1></header>
<p>This article presents the performance evaluation method and results of <strong>DeepSeek R1 671B</strong> inference on 5x AMD MI300X servers (40 GPUs in total).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">â€‹</a></h2>
<p>The purpose of this benchmarking is to measure the maximum throughput (output tokens/sec) achievable when running distributed inference of the DeepSeek R1 671B model on a 5-node AMD MI300X GPU cluster. This metric directly determines the cost efficiency of inference service (tokens/$). This benchmarking demonstrates three key points:</p>
<ul>
<li class="">We built a distributed inference system operating at the AMD GPU cluster level <strong>in real deployments</strong>, which efficiently handles high-concurrency requests via prefill-decode disaggregation and expert parallelism.</li>
<li class="">MoAI Inference Framework delivers industry-leading throughput on AMD MI300X GPU clusters, which enables lower cost-per-token ($/token) configurations.</li>
<li class="">MoAI Inference Framework achieves throughput on AMD MI300X GPU clusters that is on par with what is attainable on NVIDIA H100 GPU clusters.</li>
</ul>
<p>The experimental methodology was largely designed by referring to the following report from the SGLang team, which measures the performance of PD disaggregation and expert parallelism on an NVIDIA H100 GPU cluster. The key difference is that, while the SGLang team measures prefill-only and decode-only performance separately, our benchmarking integrates prefill and decode instances and measures performance in an end-to-end inference environment, which more accurately reflects real-world achievable performance.</p>
<ul>
<li class="">Reference: <a href="https://lmsys.org/blog/2025-05-05-large-scale-ep/" target="_blank" rel="noopener noreferrer" class="">Deploying DeepSeek with PD Disaggregation and Large-Scale Expert Parallelism on 96 H100 GPUs</a></li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="target-environment-and-configuration">Target environment and configuration<a href="#target-environment-and-configuration" class="hash-link" aria-label="Direct link to Target environment and configuration" title="Direct link to Target environment and configuration" translate="no">â€‹</a></h2>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>GPU servers</td><td>5x servers, each equipped with 8x AMD MI300X GPUs</td></tr><tr><td>Networking</td><td>InfiniBand HDR</td></tr><tr><td>Inference engine</td><td>Moreh vLLM (0.11.0rc2.moreh20251212)</td></tr><tr><td>Model</td><td><code>deepseek-ai/DeepSeek-R1</code></td></tr><tr><td>PD disaggregation</td><td>2x prefill, 3x decode instances</td></tr><tr><td>Parallelization</td><td>EP=8 + DP=8</td></tr></tbody></table>
<p>The specifications of each GPU server are as follows:</p>
<ul>
<li class="">CPU: 2x AMD EPYC 9474F 48-core 3.6 GHz</li>
<li class="">Main memory: 2,304 GB</li>
<li class="">GPU: 8x AMD Instinct MI300X OAM GPU 192 GB</li>
<li class="">Server: Gigabyte G593-ZX1-AAX1</li>
<li class="">Operating system: Ubuntu 22.04.4 LTS</li>
<li class="">ROCm version: 6.4.1</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment" translate="no">â€‹</a></h2>
<p>Please make sure to install all <a class="" href="/getting_started/prerequisites/">prerequisites</a> before starting this benchmarking. Also, please refer to the <a class="" href="/getting_started/quickstart/">quickstart</a> to understand how to run the MoAI Inference Framework.</p>
<p>In this benchmarking, you need to deploy the <strong>Istio</strong> gateway, the <strong>Heimdall</strong> scheduler configured to specify the basic routing strategy for PD disaggregation, and the <strong>Odin</strong> inference service configured to run two prefill instances and three decode instances across five GPU servers using optimized settings.</p>
<p>First, you need to have a namespace for deploying and running the components of the MoAI Inference Framework. In this guide, we assume the namespace is named <code>mif</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl create namespace mif</span><br></span></code></pre></div></div>
<p><strong>AWS credentials must be configured in this namespace to allow the container images of the MoAI Inference Framework to be downloaded</strong>. For details, refer to the &quot;Amazon ECR token for Moreh&#x27;s container image repository&quot; section in the <a class="" href="/getting_started/prerequisites/">prerequisites</a>.</p>
<p>Then, you can use the following configuration files for the components. Click to view their contents. <strong>You must store the DeepSeek-R1 model checkpoint on the host of every worker node and specify its path on line 19 of the <code>inference-service-values.yaml</code> file</strong>. This path will be mounted to <code>/app/model/DeepSeek-R1</code> inside the pod and used to run the Moreh vLLM server.</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Istio gateway configuration (gateway.yaml)</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Heimdall scheduler configuration (heimdall-values.yaml)</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Odin inference service configuration (inference-service-values.yaml)</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">gateway</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">infrastructure</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">|</span><span class="token scalar string" style="color:rgb(206, 145, 120)"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">    spec:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">      type: ClusterIP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">deployment</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">|</span><span class="token scalar string" style="color:rgb(206, 145, 120)"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">    spec:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">      template:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        metadata:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">          annotations:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">            proxy.istio.io/config: |</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">              accessLogFile: /dev/stdout</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">              accessLogEncoding: JSON</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        spec:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">          containers:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">            - name: istio-proxy</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">              resources:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">                limits: null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> gateway.networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Gateway</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">gatewayClassName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> istio</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">infrastructure</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">parametersRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">gateway</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">infrastructure</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">listeners</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> HTTP</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">allowedRoutes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">namespaces</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> All</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">global</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">imagePullSecrets</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> moreh</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> inference.networking.x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">k8s.io/v1alpha1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> EndpointPickerConfig</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">plugins</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> pd</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">profile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">handler</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> prefill</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">filter</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> decode</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">filter</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">scorer</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">parameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">requestTimeout</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;20m&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> max</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">picker</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> random</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">picker</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">schedulingProfiles</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> prefill</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">plugins</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">pluginRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> prefill</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">filter</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">pluginRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">scorer</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">weight</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">pluginRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> max</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">picker</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> decode</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">plugins</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">pluginRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> decode</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">filter</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">pluginRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> active</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">scorer</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">weight</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">pluginRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> max</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">picker</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">tolerations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> amd.com/gpu</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">operator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">effect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">gateway</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">gatewayClassName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> istio</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">global</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">imagePullSecrets</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> moreh</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">extraVolumeMounts</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> shm</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /dev/shm</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dsr1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /app/model/DeepSeek</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">R1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">readOnly</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">extraVolumes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> shm</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">emptyDir</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">medium</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Memory</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">sizeLimit</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> 16Gi</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> dsr1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">hostPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /path/to/deepseek</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">r1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">_common</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token important">&amp;common</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">repository</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> 255250787067.dkr.ecr.ap</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">northeast</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">2.amazonaws.com/quickstart/moreh</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">vllm</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> vllm_251212</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">updateStrategy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Recreate</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token important">&amp;resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">amd.com/gpu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">mellanox/hca</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token important">*resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">tolerations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> amd.com/gpu</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">operator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">effect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">podMonitor</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">prometheus-stack/prometheus</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> enabled</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">extraEnvVars</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> UCX_IB_PCI_RELAXED_ORDERING</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;on&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> UCX_TLS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> rocm_copy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain">rocm_ipc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain">sm</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain">rc_x</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NCCL_IB_PCI_RELAXED_ORDERING</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NCCL_NET_GDR_LEVEL</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NCCL_MIN_NCHANNELS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;112&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_RANDOMIZE_DP_DUMMY_INPUTS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_ROCM_USE_AITER</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_ROCM_USE_AITER_FP8BMM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_ALL2ALL_BACKEND</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;mori&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_HTTP_TIMEOUT_KEEP_ALIVE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1000000000&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_NIXL_ABORT_REQUEST_TIMEOUT</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1000000000&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_NIXL_SIDE_CHANNEL_HOST</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">fieldRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">fieldPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> status.podIP</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_LOG_STATS_INTERVAL</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;10&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_SERVERSIDE_LOGGING</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_SERVERSIDE_LOG_INTERVAL</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;10&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> GLOO_SOCKET_IFNAME</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NCCL_SOCKET_IFNAME</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> TP_SOCKET_IFNAME</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">proxy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> c8abd08</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">decode</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token important">*common</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">parallelism</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">extraArgs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> /app/model/DeepSeek</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">R1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">served</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> deepseek</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ai/DeepSeek</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">R1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">trust</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">remote</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">code</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">no</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">prefix</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">caching</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">no</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">chunked</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">prefill</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">enforce</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">eager</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">tensor</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">parallel</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">expert</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">parallel</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">max</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">model</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">len</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;8192&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">max</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">num</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">seqs</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;2048&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">kv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cache</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">dtype</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> fp8_e4m3</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">quantization</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> ds_fp8_per_token</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">size</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;16&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">kv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">transfer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;{&quot;kv_connector&quot;:&quot;NixlConnector&quot;,&quot;kv_role&quot;:&quot;kv_both&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">disable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">uvicorn</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">access</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">no</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">enable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">requests</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">disable</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">stats</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">max</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">num</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">batched</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">token</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;16384&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">gpu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">memory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">utilization</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;0.92&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">extraEnvVars</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MOE_DP_CHUNK_SIZE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;512&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_V1_OUTPUT_PROC_CHUNK_SIZE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;512&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_DISPATCH_BLK_NO</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;128&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_DISPATCH_WARP_PER_BLK</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;16&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_COMBINE_BLK_NO</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;64&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_COMBINE_WARP_PER_BLK</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_IS_DECODE_WORKER</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;decode&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">prefill</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">&lt;&lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token important">*common</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> /bin/bash</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">lc</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">|</span><span class="token scalar string" style="color:rgb(206, 145, 120)"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">      vllm serve &quot;/app/model/DeepSeek-R1&quot; \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --served-model-name deepseek-ai/DeepSeek-R1 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --port 8000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --trust-remote-code \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --tensor-parallel-size 1 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --data-parallel-size 8 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --enable-expert-parallel \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --no-enable-prefix-caching \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --no-enable-chunked-prefill \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --enforce-eager \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --max-model-len 8192 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --max-num-seqs 2048 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --kv-cache-dtype fp8_e4m3 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --quantization ds_fp8_per_token \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --block-size 16 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --kv-transfer-config &#x27;{&quot;kv_connector&quot;:&quot;NixlConnector&quot;,&quot;kv_role&quot;:&quot;kv_both&quot;}&#x27; \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --disable-uvicorn-access-log \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --no-enable-log-requests \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --disable-log-stats \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --max-num-batched-token 64000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token scalar string" style="color:rgb(206, 145, 120)">        --gpu-memory-utilization 0.92</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">extraEnvVars</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MOE_DP_CHUNK_SIZE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;4096&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_V1_OUTPUT_PROC_CHUNK_SIZE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;128&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_DISPATCH_BLK_NO</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;128&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_DISPATCH_WARP_PER_BLK</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;16&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_COMBINE_BLK_NO</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;64&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_MORI_COMBINE_WARP_PER_BLK</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;4&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> VLLM_IS_DECODE_WORKER</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;prefill&#x27;</span><br></span></code></pre></div></div></div></div></div>
<p>Run the following commands to deploy and run the components.</p>
<p><strong>Istio gateway:</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-f</span><span class="token plain"> gateway.yaml</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl get pod </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> mif </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-l</span><span class="token plain"> gateway.networking.k8s.io/gateway-name</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">mif</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mif-istio-584474ddd9-rt9p9   </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          163m</span><br></span></code></pre></div></div>
<p><strong>Heimdall scheduler:</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">helm upgrade </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-i</span><span class="token plain"> heimdall moreh/heimdall </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--version</span><span class="token plain"> v0.5.0 </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> mif </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-f</span><span class="token plain"> heimdall-values.yaml</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl get all </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> mif </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-l</span><span class="token plain"> app.kubernetes.io/instance</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">heimdall</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/heimdall-5576d4f48b-bgn4c   </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          3d1h</span><br></span></code></pre></div></div>
<p><strong>Odin inference service:</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">helm upgrade </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-i</span><span class="token plain"> inference-service moreh/inference-service </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--version</span><span class="token plain"> v0.6.1 </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> mif </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-f</span><span class="token plain"> inference-service-values.yaml</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl get all </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> mif </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-l</span><span class="token plain"> app.kubernetes.io/instance</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">inference-service</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">NAME                                             READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-1                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-2                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-3                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-4                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-5                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-6                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-7                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-0-8                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          95s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-1                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-2                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-3                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-4                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-5                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-6                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-7                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-1-8                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          103s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-1                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-2                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-3                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-4                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-5                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-6                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-7                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-decode-2-8                 </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          110s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-prefill-648bfd7bd6-cthnv   </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          3m38s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pod/inference-service-prefill-648bfd7bd6-lz6km   </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain">          3m38s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">NAME                                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">deployment.apps/inference-service-prefill   </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">/2     </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">            </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">           3m38s</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">NAME                                                   DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">replicaset.apps/inference-service-prefill-648bfd7bd6   </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">         </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">         </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain">       3m38s</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="benchmarking-method">Benchmarking method<a href="#benchmarking-method" class="hash-link" aria-label="Direct link to Benchmarking method" title="Direct link to Benchmarking method" translate="no">â€‹</a></h2>
<p>We follow a commonly used approach for measuring the computational performance of inference servers. Multiple concurrent users send requests at a specific request-per-second (RPS) rate, each with a fixed input sequence length and output sequence length. The concurrency and RPS are determined empirically as high as possible within the limits of GPU memory capacity and without allowing requests to accumulate in the request queue of vLLM instances. We measure the response times of these requests and compute output tokens per second, total tokens per second, time to first token, and inter-token latency (also known as time per output token).</p>
<p>We use the <a href="https://docs.vllm.ai/en/latest/cli/bench/serve/" target="_blank" rel="noopener noreferrer" class="">vLLM bench serve</a> tool to conduct experiments of this kind. However, this tool was originally designed to measure the performance of a single-GPU server, and several aspects of it are insufficient for evaluating the levels of throughput observed in our experiments â€” tens of thousands of tokens per second. Therefore, we implemented three additional features in the vLLM bench serve tool bundled with Moreh vLLM, to correctly measure performance in a distributed inference environment with very high throughput. See the modified version <a href="https://github.com/moreh-dev/vllm/tree/main/vllm/benchmarks" target="_blank" rel="noopener noreferrer" class="">here</a>.</p>
<ul>
<li class=""><code>--warmup-time</code>, <code>--cooldown-time</code>: At the beginning of the experiment, before enough requests have accumulated, and near the end of the experiment, as computation winds down, the GPUs are not fully utilized. To reliably measure the maximum throughput achievable by the inference system, we enabled the tool to exclude requests from the initial (warm-up) and final (cool-down) phases from the performance measurement.</li>
<li class=""><code>--max-connections-per-worker</code>: We made the response times of individual requests be recorded across multiple threads; otherwise, information for some requests may be lost.</li>
<li class=""><code>--sharegpt-input-len</code>, <code>--sharegpt-output-len</code>, <code>--gutenberg-input-len</code>, <code>--gutenberg-output-len</code>: To accurately measure the effect of EP load balancing, we used substrings of meaningful text from a real dataset, cut to the desired input sequence length, as prompts rather than meaningless random strings.</li>
</ul>
<p>In this benchmarking, we evaluate three different input/output sequence lengths (512/512, 1000/1000, and 2000/2000) and two different datasets (<a href="https://www.kaggle.com/datasets/roschildrui/sharegpt-v3-unfiltered-cleaned-split" target="_blank" rel="noopener noreferrer" class="">ShareGPT</a> and <a href="https://huggingface.co/datasets/manu/project_gutenberg" target="_blank" rel="noopener noreferrer" class="">Gutenberg</a>). To launch a new Moreh vLLM pod in a Kubernetes cluster, first create a <code>benchmarking-client.yaml</code> file as follows. <strong>Please modify the following items to match your system.</strong></p>
<ul>
<li class=""><strong>On lines 5, 15, 26 and 28, specify the name of the Kubernetes worker node on which the benchmarking pod will run.</strong></li>
<li class=""><strong>Store the <code>ShareGPT_V3_unfiltered_cleaned_split.json</code> file and the <code>project_gutenberg</code> directory on the host filesystem of that node, and specify their paths on lines 44 and 47.</strong></li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;clientHostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mif</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> infinity</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> 255250787067.dkr.ecr.ap</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">northeast</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">2.amazonaws.com/quickstart/moreh</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">vllm</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">vllm_251212</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">imagePullPolicy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;clientHostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">volumeMounts</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> sharegpt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">dataset</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/app/dataset/ShareGPT_V3_unfiltered_cleaned_split.json&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> gutenberg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">dataset</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/app/dataset/project_gutenberg&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">privileged</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">dnsPolicy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ClusterFirst</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">enableServiceLinks</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">nodeName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;clientHostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/hostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;clientHostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">preemptionPolicy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">priority</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">restartPolicy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">serviceAccount</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">serviceAccountName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">terminationGracePeriodSeconds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">tolerations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">effect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> amd.com/gpu</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">operator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> sharegpt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">dataset</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">hostPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /path/to/ShareGPT_V3_unfiltered_cleaned_split.json</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> gutenberg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">dataset</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      </span><span class="token key atrule">hostPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /path/to/project_gutenberg</span><br></span></code></pre></div></div>
<p>Run the following command to start the pod.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">kubectl </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-n</span><span class="token plain"> mif apply </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">-f</span><span class="token plain"> benchmarking-client.yaml</span><br></span></code></pre></div></div>
<p>Inside the pod, you can run <code>vllm bench serve</code> as follows. This is an example that uses an input sequence length of 512, an output sequence length of 512, and the ShareGPT dataset. <strong>You may need to modify the host on line 6 depending on your Istio gateway address</strong>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1,10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">140</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">120.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">70.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name sharegpt </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/ShareGPT_V3_unfiltered_cleaned_split.json </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">512</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">512</span><br></span></code></pre></div></div>
<p>The followings are the actual commands used to run each experiment. You can click to view each command. For each experiment, the warm-up time and cool-down time were adjusted appropriately.</p>
<p>==- (512, 512, ShareGPT)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1,10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">140</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">120.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">70.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name sharegpt </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/ShareGPT_V3_unfiltered_cleaned_split.json </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">512</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">512</span><br></span></code></pre></div></div>
<p>==- (512, 512, Gutenberg)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1,10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">140</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">130.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">70.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name gutenberg </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/project_gutenberg </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gutenberg-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">512</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gutenberg-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">512</span><br></span></code></pre></div></div>
<p>==- (1000, 1000, ShareGPT)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1,10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">140.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">110.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name sharegpt </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/ShareGPT_V3_unfiltered_cleaned_split.json </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><br></span></code></pre></div></div>
<p>==- (1000, 1000, Gutenberg)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">150.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">120.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name gutenberg </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/project_gutenberg </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gutenberg-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gutenberg-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><br></span></code></pre></div></div>
<p>==- (2000, 2000, ShareGPT)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1,10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">48</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">250.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">290.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name sharegpt </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/ShareGPT_V3_unfiltered_cleaned_split.json </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --sharegpt-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><br></span></code></pre></div></div>
<p>==- (2000, 2000, Gutenberg)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">vllm bench serve </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--backend</span><span class="token plain"> vllm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--model</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;deepseek-ai/DeepSeek-R1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --metric-percentiles </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1,10,25,50,75,90&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --percentile-metrics </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;itl,tps,ttft&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--host</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;mif-istio.mif.svc.cluster.local&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(156, 220, 254)">--port</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --num-prompts </span><span class="token number" style="color:rgb(181, 206, 168)">32400</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-concurrency </span><span class="token number" style="color:rgb(181, 206, 168)">10800</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --request-rate </span><span class="token number" style="color:rgb(181, 206, 168)">60</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ignore-eos </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --ready-check-timeout-sec </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --max-connections-per-worker </span><span class="token number" style="color:rgb(181, 206, 168)">1296</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --warmup-time </span><span class="token number" style="color:rgb(181, 206, 168)">260.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --cooldown-time </span><span class="token number" style="color:rgb(181, 206, 168)">240.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-name gutenberg </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --dataset-path /app/dataset/project_gutenberg </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gutenberg-input-len </span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gutenberg-output-len </span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><br></span></code></pre></div></div>
<p>===</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="experimental-results">Experimental results<a href="#experimental-results" class="hash-link" aria-label="Direct link to Experimental results" title="Direct link to Experimental results" translate="no">â€‹</a></h2>
<p>The results are as follows. As mentioned earlier, the concurrency and RPS values were determined empirically and may vary depending on the system scale (the number of GPU nodes). We achieved 50,892-66,194 output tokens/sec across various configurations, which corresponds to <strong>17,000-22,000 tokens/sec per decode node</strong>.</p>
<table><thead><tr><th style="text-align:center">Input sequence length</th><th style="text-align:center">Output sequence length</th><th style="text-align:center">Dataset</th><th style="text-align:center">(Concurrency, RPS)</th><th style="text-align:right">Output tokens/sec</th><th style="text-align:right">Output tokens/sec per decode node</th><th style="text-align:right">Total tokens/sec</th><th style="text-align:right">Mean TTFT (ms)</th><th style="text-align:right">Mean ITL (ms)</th></tr></thead><tbody><tr><td style="text-align:center">512</td><td style="text-align:center">512</td><td style="text-align:center">ShareGPT</td><td style="text-align:center">(10800, 140)</td><td style="text-align:right">66,194.80</td><td style="text-align:right"><strong>22,064.93</strong></td><td style="text-align:right">85,347.35</td><td style="text-align:right">1,677.87</td><td style="text-align:right">160.33</td></tr><tr><td style="text-align:center">512</td><td style="text-align:center">512</td><td style="text-align:center">Gutenberg</td><td style="text-align:center">(10800, 140)</td><td style="text-align:right">64,695.10</td><td style="text-align:right"><strong>21,565.03</strong></td><td style="text-align:right">79,432.24</td><td style="text-align:right">1,774.90</td><td style="text-align:right">164.32</td></tr><tr><td style="text-align:center">1000</td><td style="text-align:center">1000</td><td style="text-align:center">ShareGPT</td><td style="text-align:center">(10800, 80)</td><td style="text-align:right">61,828.90</td><td style="text-align:right"><strong>20,609.63</strong></td><td style="text-align:right">94,103.87</td><td style="text-align:right">1,802.87</td><td style="text-align:right">172.16</td></tr><tr><td style="text-align:center">1000</td><td style="text-align:center">1000</td><td style="text-align:center">Gutenberg</td><td style="text-align:center">(10800, 80)</td><td style="text-align:right">61,418.55</td><td style="text-align:right"><strong>20,472.85</strong></td><td style="text-align:right">92,353.63</td><td style="text-align:right">2,149.80</td><td style="text-align:right">173.63</td></tr><tr><td style="text-align:center">2000</td><td style="text-align:center">2000</td><td style="text-align:center">ShareGPT</td><td style="text-align:center">(10800, 48)</td><td style="text-align:right">51,187.87</td><td style="text-align:right"><strong>17,062.62</strong></td><td style="text-align:right">77,775.33</td><td style="text-align:right">2,567.87</td><td style="text-align:right">208.59</td></tr><tr><td style="text-align:center">2000</td><td style="text-align:center">2000</td><td style="text-align:center">Gutenberg</td><td style="text-align:center">(10800, 60)</td><td style="text-align:right">50,892.65</td><td style="text-align:right"><strong>16,964.22</strong></td><td style="text-align:right">76,739.86</td><td style="text-align:right">5,586.34</td><td style="text-align:right">208.76</td></tr></tbody></table>
<p>Click to view raw benchmarking logs.</p>
<p>==- (512, 512, ShareGPT)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     4333</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           140.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            120.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          70.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  115.83</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      2218496</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  7667539</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         66194.80</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          85347.35</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          1677.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        1720.09</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 TTFT (ms):                            673.72</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           944.53</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           1177.09</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           1720.09</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           2117.51</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           2387.32</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           160.33</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         158.98</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 ITL (ms):                             105.28</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            139.59</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            151.42</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            158.98</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            169.65</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            184.02</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>==- (512, 512, Gutenberg)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     3186</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           140.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            130.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          70.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  110.69</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      1631232</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  7161008</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         64695.10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          79432.24</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          1774.90</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        1795.76</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 TTFT (ms):                            775.35</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           877.82</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           1124.76</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           1795.76</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           2296.75</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           2685.10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           164.32</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         162.24</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 ITL (ms):                             106.99</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            142.68</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            154.22</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            162.24</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            174.62</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            189.84</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>==- (1000, 1000, ShareGPT)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     11856</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           80.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            140.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          110.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  367.34</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      11856000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  22712445</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         61828.90</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          94103.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          1802.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        1411.86</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 TTFT (ms):                            724.34</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           987.73</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           1059.29</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           1411.86</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           2221.47</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           3434.72</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           172.16</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         169.69</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 ITL (ms):                             120.22</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            157.36</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            164.97</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            169.69</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            177.89</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            192.85</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>==- (1000, 1000, Gutenberg)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     10931</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           80.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            150.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          120.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  353.35</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      10931000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  21702425</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         61418.55</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          92353.63</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          2149.80</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        1910.21</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           1040.06</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           1374.56</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           1910.21</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           2759.64</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           3502.56</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           173.63</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         171.10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            155.99</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            165.99</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            171.10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            180.85</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            195.95</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>==- (2000, 2000, ShareGPT)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     11906</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           48.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            300.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          230.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  895.61</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      23812000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  45844389</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         51187.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          77775.33</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          2567.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        2538.34</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 TTFT (ms):                            971.14</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           1213.06</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           1622.42</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           2538.34</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           3267.10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           4126.80</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           208.59</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         201.50</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 ITL (ms):                             140.72</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            186.91</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            195.65</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            201.50</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            217.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            243.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>==- (2000, 2000, Gutenberg)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     12254</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           60.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            260.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          240.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  948.19</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      24508000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  48255768</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         50892.65</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          76739.86</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          5586.34</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        5313.19</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 TTFT (ms):                            1017.56</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           1745.51</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           2823.02</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           5313.19</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           7612.50</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           10096.06</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           208.76</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         201.13</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P1 ITL (ms):                             139.90</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            187.16</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            195.34</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            201.13</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            214.94</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            245.98</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">=================================================</span><br></span></code></pre></div></div>
<p>===</p>
<p>The followings are some publicly available performance numbers for comparison.</p>
<ul>
<li class="">The SGLang team reported that, on a cluster of 12x H100 nodes (96x GPUs) â€” with 3 nodes used for prefill and 9 nodes for decode â€” they achieved a throughput of <strong>22,300 output tokens/sec</strong> per decode node under a configuration with an input sequence length of 2,000 and an output sequence length of 100. Note that this number does not represent end-to-end performance with actual PD disaggregation applied; rather, it measures partial performance with decoding-only execution. (<a href="https://lmsys.org/blog/2025-05-05-large-scale-ep/" target="_blank" rel="noopener noreferrer" class="">Link</a>)</li>
<li class="">DeepSeek reported achieving <strong>14,800 tokens/sec</strong> per H800 decode node by applying PD disaggregation and expert parallelism. (<a href="https://github.com/deepseek-ai/open-infra-index/blob/main/202502OpenSourceWeek/day_6_one_more_thing_deepseekV3R1_inference_system_overview.md" target="_blank" rel="noopener noreferrer" class="">Link</a>)</li>
<li class="">AMD reported achieving <strong>up to 14,300 output tokens/sec</strong> per MI300X decode node. This result was also measured under decoding-only execution. (<a href="https://rocm.blogs.amd.com/software-tools-optimization/wide-ep-deepseek/README.html" target="_blank" rel="noopener noreferrer" class="">Link</a>).</li>
</ul>
<p>In real production deployments, an appropriate trade-off between throughput and latency (inter-token latency and time to first token) must be chosen according to the service-level objectives (SLOs). As shorter latency targets are pursued, achievable throughput inevitably decreases. Nevertheless, meausring and comparing the maximum achievable throughput before applying SLO constraints is an important step in evaluating infrastructure efficiency. Our next benchmarking will examine how throughput varies across different ITL targets.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="appendix">Appendix<a href="#appendix" class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="experimental-results-for-isl2000-and-osl100">Experimental results for ISL=2,000 and OSL=100<a href="#experimental-results-for-isl2000-and-osl100" class="hash-link" aria-label="Direct link to Experimental results for ISL=2,000 and OSL=100" title="Direct link to Experimental results for ISL=2,000 and OSL=100" translate="no">â€‹</a></h3>
<p>An input sequence length of 2,000 and an output sequence length of 100 were first used by the SGLang team for their PD+EP performance evaluation. Since then, this configuration has been widely adopted to evaluate PD+EP performance of DeepSeek R1.</p>
<p>First, please note that this configuration was proposed to measure prefill and decode throughput separately. Under the assumption that the input length is always 20x longer, a real inference system would require ~10x more prefill instances than decode instances. (In practice, real usage patterns differ from this assumption, and the number of decode instances typically exceeds that of prefill instances.) In small clusters, prefill inevitably becomes the overall performance bottleneck, making it impossible to accurately measuring the output tokens/sec that the GPU servers can actually deliver.</p>
<p>Despite this, by enabling prefix caching and having input sequences share a fixed set of prompts, we can design a scenario in which the prefill workload is significantly reduced and measure the resulting output tokens/sec. As a result, we achieved <strong>~18,000 tokens/sec per decode node</strong>.</p>
<table><thead><tr><th style="text-align:center">Input sequence length</th><th style="text-align:center">Output sequence length</th><th style="text-align:center">Dataset</th><th style="text-align:center">(Concurrency, RPS)</th><th style="text-align:right">Output tokens/sec</th><th style="text-align:right">Output tokens/sec per decode node</th><th style="text-align:right">Mean ITL (ms)</th></tr></thead><tbody><tr><td style="text-align:center">2000</td><td style="text-align:center">100</td><td style="text-align:center">Gutenberg</td><td style="text-align:center">(10800, 1500)</td><td style="text-align:right">53,776.62</td><td style="text-align:right"><strong>17,925.54</strong></td><td style="text-align:right">191.71</td></tr></tbody></table>
<p>Click to view the raw benchmarking log.</p>
<p>==- (2000, 100, Gutenberg)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">&#x27;=============Serving Benchmark Result=============</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Number of worker processes:              30</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Successful requests:                     185577</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Maximum request concurrency:             10800</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Request rate configured (RPS):           1500.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Warm-up Time:                            30.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Cool-down Time:                          20.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Benchmark duration (s):                  367.68</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total input tokens:                      371154000</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total generated tokens:                  19772555</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Output token throughput (tok/s):         53776.62</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Total Token throughput (tok/s):          1063226.66</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Time to First Token----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean TTFT (ms):                          1079.36</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median TTFT (ms):                        979.51</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 TTFT (ms):                           832.05</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 TTFT (ms):                           897.71</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 TTFT (ms):                           979.51</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 TTFT (ms):                           1079.35</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 TTFT (ms):                           1223.28</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">---------------Inter-token Latency----------------</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Mean ITL (ms):                           191.71</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Median ITL (ms):                         181.35</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P10 ITL (ms):                            166.87</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P25 ITL (ms):                            175.00</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P50 ITL (ms):                            181.35</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P75 ITL (ms):                            191.88</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">P90 ITL (ms):                            259.46</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">==================================================</span><br></span></code></pre></div></div>
<p>===</p>
<p>We have also measured the performance of a decoding-only execution under the same configuration (ISL=2,000, OSL=100) and reported the results in a <a href="https://moreh.io/technical-report/21k-output-tokens-per-second-deepseek-inference-on-amd-instinct-mi300x-gpus-with-expert-parallelism-251113/" target="_blank" rel="noopener noreferrer" class="">technical report</a>. The maximum throughput achieved in this setting was 21,224 tokens/sec per decode node. This indicates that, in an end-to-end environment, MoAI Inference Framework is able to achieve <strong>~85% of the peak decode performance</strong>.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/benchmarking/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Benchmarking</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/benchmarking/more_benchmarking_for_deepseek_r1_671b_on_amd_mi300x_gpus/performance_with_prefix_cache_and_load_aware_routing/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance with prefix cache- and load-aware routing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#target-environment-and-configuration" class="table-of-contents__link toc-highlight">Target environment and configuration</a></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#benchmarking-method" class="table-of-contents__link toc-highlight">Benchmarking method</a></li><li><a href="#experimental-results" class="table-of-contents__link toc-highlight">Experimental results</a></li><li><a href="#appendix" class="table-of-contents__link toc-highlight">Appendix</a><ul><li><a href="#experimental-results-for-isl2000-and-osl100" class="table-of-contents__link toc-highlight">Experimental results for ISL=2,000 and OSL=100</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Â© Copyright 2026 Moreh, Inc. All rights reserved.</div></div></div></footer></div>
</body>
</html>