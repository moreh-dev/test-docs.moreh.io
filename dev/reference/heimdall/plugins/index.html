<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/heimdall/plugins" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Heimdall plugins | Moreh</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://test-docs.moreh.io/dev/reference/heimdall/plugins/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Heimdall plugins | Moreh"><meta data-rh="true" name="description" content="Profile handlers"><meta data-rh="true" property="og:description" content="Profile handlers"><link data-rh="true" rel="icon" href="/moreh-icon.png"><link data-rh="true" rel="canonical" href="https://test-docs.moreh.io/dev/reference/heimdall/plugins/"><link data-rh="true" rel="alternate" href="https://test-docs.moreh.io/dev/reference/heimdall/plugins/" hreflang="en"><link data-rh="true" rel="alternate" href="https://test-docs.moreh.io/dev/reference/heimdall/plugins/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Plugins","item":"https://test-docs.moreh.io/dev/reference/heimdall/plugins"}]}</script><link rel="stylesheet" href="/assets/css/styles.d347868e.css">
<script src="/assets/js/runtime~main.68118f1f.js" defer="defer"></script>
<script src="/assets/js/main.7d4cef61.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/moreh-logo.svg" alt="Moreh logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/moreh-logo-white.svg" alt="Moreh logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/dev/reference/heimdall/plugins/">Dev ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/dev/reference/heimdall/plugins/">Dev ðŸš§</a></li><li><a class="dropdown__link" href="/">v0.0.0</a></li></ul></div><a href="https://moreh.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/moreh-dev/mif" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/dev/getting-started/prerequisites/"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/getting-started/prerequisites/"><span title="Prerequisites" class="linkLabel_WmDU">Prerequisites</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/getting-started/quickstart/"><span title="Quickstart" class="linkLabel_WmDU">Quickstart</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/dev/features/preset/"><span title="Features" class="categoryLinkLabel_W154">Features</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/features/preset/"><span title="Presets" class="linkLabel_WmDU">Presets</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/dev/operations/hf-model-management-with-pv/"><span title="Operations" class="categoryLinkLabel_W154">Operations</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/operations/hf-model-management-with-pv/"><span title="HF Model Management (PV)" class="linkLabel_WmDU">HF Model Management (PV)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/operations/container-image-caching-with-harbor/"><span title="Container image caching (Harbor)" class="linkLabel_WmDU">Container image caching (Harbor)</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/dev/reference/heimdall/api-reference/"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/dev/reference/heimdall/api-reference/"><span title="Heimdall" class="categoryLinkLabel_W154">Heimdall</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/reference/heimdall/api-reference/"><span title="API Reference" class="linkLabel_WmDU">API Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dev/reference/heimdall/plugins/"><span title="Plugins" class="linkLabel_WmDU">Plugins</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/dev/reference/odin/api-reference/"><span title="Odin" class="categoryLinkLabel_W154">Odin</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/reference/odin/api-reference/"><span title="API Reference" class="linkLabel_WmDU">API Reference</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev/reference/supported-devices/"><span title="Supported devices" class="linkLabel_WmDU">Supported devices</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Moreh<!-- --> <b>Dev ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->v0.0.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Heimdall</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Plugins</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Dev ðŸš§</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Heimdall plugins</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="profile-handlers">Profile handlers<a href="#profile-handlers" class="hash-link" aria-label="Direct link to Profile handlers" title="Direct link to Profile handlers" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="single-profile-handler"><code>single-profile-handler</code><a href="#single-profile-handler" class="hash-link" aria-label="Direct link to single-profile-handler" title="Direct link to single-profile-handler" translate="no">â€‹</a></h3>
<p>Handles a single profile which is always the primary profile.</p>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pd-profile-handler"><code>pd-profile-handler</code><a href="#pd-profile-handler" class="hash-link" aria-label="Direct link to pd-profile-handler" title="Direct link to pd-profile-handler" translate="no">â€‹</a></h3>
<p>Handles scheduler profiles for Prefill-Decode (PD) disaggregation.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>threshold</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>0</code></td><td style="text-align:left">Threshold for decoding operations.</td></tr><tr><td style="text-align:left"><code>decodeProfile</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;decode&quot;</code></td><td style="text-align:left">Name of the profile to use for decode operations.</td></tr><tr><td style="text-align:left"><code>prefillProfile</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;prefill&quot;</code></td><td style="text-align:left">Name of the profile to use for prefill operations.</td></tr><tr><td style="text-align:left"><code>prefixPluginType</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;prefix-cache-scorer&quot;</code></td><td style="text-align:left">Type of the prefix cache plugin to use.</td></tr><tr><td style="text-align:left"><code>prefixPluginName</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;prefix-cache-scorer&quot;</code></td><td style="text-align:left">Name of the prefix cache plugin to use.</td></tr><tr><td style="text-align:left"><code>hashBlockSize</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>64</code></td><td style="text-align:left">Block size used for hashing tokens.</td></tr><tr><td style="text-align:left"><code>primaryPort</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>0</code></td><td style="text-align:left">Port number of the primary container (0 to disable).</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="filters">Filters<a href="#filters" class="hash-link" aria-label="Direct link to Filters" title="Direct link to Filters" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="by-label"><code>by-label</code><a href="#by-label" class="hash-link" aria-label="Direct link to by-label" title="Direct link to by-label" translate="no">â€‹</a></h3>
<p>Filters out pods based on the values defined by the given label.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>label</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">-</td><td style="text-align:left">The label key to filter by. (Required)</td></tr><tr><td style="text-align:left"><code>validValues</code></td><td style="text-align:left"><code>[]string</code></td><td style="text-align:left">-</td><td style="text-align:left">List of allowed values for the label. (Required unless <code>allowsNoLabel</code> is true)</td></tr><tr><td style="text-align:left"><code>allowsNoLabel</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left"><code>false</code></td><td style="text-align:left">Whether to allow pods that do not have the specified label.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="by-label-selector"><code>by-label-selector</code><a href="#by-label-selector" class="hash-link" aria-label="Direct link to by-label-selector" title="Direct link to by-label-selector" translate="no">â€‹</a></h3>
<p>Filters out pods that do not match the configured label selector criteria.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>matchLabels</code></td><td style="text-align:left"><code>map[string]string</code></td><td style="text-align:left">-</td><td style="text-align:left">Key-value pairs of labels that must match.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="prefill-filter"><code>prefill-filter</code><a href="#prefill-filter" class="hash-link" aria-label="Direct link to prefill-filter" title="Direct link to prefill-filter" translate="no">â€‹</a></h3>
<p>Filters for pods designated with the <code>prefill</code> role. It retains pods that have the label <code>mif.moreh.io/role</code> set to <code>prefill</code>.</p>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="decode-filter"><code>decode-filter</code><a href="#decode-filter" class="hash-link" aria-label="Direct link to decode-filter" title="Direct link to decode-filter" translate="no">â€‹</a></h3>
<p>Filters for pods designated with the <code>decode</code> role. It retains pods that satisfy one of the following conditions:</p>
<ul>
<li class="">The label <code>mif.moreh.io/role</code> is set to <code>decode</code> or <code>both</code>.</li>
<li class="">The label <code>mif.moreh.io/role</code> is not set.</li>
</ul>
<p>No parameters.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="scorers">Scorers<a href="#scorers" class="hash-link" aria-label="Direct link to Scorers" title="Direct link to Scorers" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="active-request-scorer"><code>active-request-scorer</code><a href="#active-request-scorer" class="hash-link" aria-label="Direct link to active-request-scorer" title="Direct link to active-request-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on the number of active requests being served. Scores are normalized from 0 to 1.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>requestTimeout</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;2m&quot;</code></td><td style="text-align:left">Duration to consider a request active (e.g., &quot;30s&quot;, &quot;1m&quot;).</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="load-aware-scorer"><code>load-aware-scorer</code><a href="#load-aware-scorer" class="hash-link" aria-label="Direct link to load-aware-scorer" title="Direct link to load-aware-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on load (waiting queue size). Pods with empty queues get higher scores.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>threshold</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>128</code></td><td style="text-align:left">Queue size threshold for scoring.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="no-hit-lru-scorer"><code>no-hit-lru-scorer</code><a href="#no-hit-lru-scorer" class="hash-link" aria-label="Direct link to no-hit-lru-scorer" title="Direct link to no-hit-lru-scorer" translate="no">â€‹</a></h3>
<p>Favors pods that were least recently used for cold requests to distribute cache growth.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>prefixPluginType</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;prefix-cache-scorer&quot;</code></td><td style="text-align:left">Type of the prefix cache plugin.</td></tr><tr><td style="text-align:left"><code>prefixPluginName</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;prefix-cache-scorer&quot;</code></td><td style="text-align:left">Name of the prefix cache plugin.</td></tr><tr><td style="text-align:left"><code>lruSize</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>1024</code></td><td style="text-align:left">Size of the LRU cache.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="precise-prefix-cache-scorer"><code>precise-prefix-cache-scorer</code><a href="#precise-prefix-cache-scorer" class="hash-link" aria-label="Direct link to precise-prefix-cache-scorer" title="Direct link to precise-prefix-cache-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on precise prefix-cache KV-block locality using an internal indexer.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>tokenProcessorConfig</code></td><td style="text-align:left"><a href="#tokenprocessorconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for the token processor.</td></tr><tr><td style="text-align:left"><code>indexerConfig</code></td><td style="text-align:left"><a href="#indexerconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for the KV cache indexer.</td></tr><tr><td style="text-align:left"><code>kvEventsConfig</code></td><td style="text-align:left"><a href="#kveventsconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for KV events subscription.</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="tokenprocessorconfig"><code>tokenProcessorConfig</code><a href="#tokenprocessorconfig" class="hash-link" aria-label="Direct link to tokenprocessorconfig" title="Direct link to tokenprocessorconfig" translate="no">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>blockSize</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>16</code></td><td style="text-align:left">Number of tokens per block.</td></tr><tr><td style="text-align:left"><code>hashSeed</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;&quot;</code></td><td style="text-align:left">Seed for computing block hashes. Should match <code>PYTHONHASHSEED</code>.</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="indexerconfig"><code>indexerConfig</code><a href="#indexerconfig" class="hash-link" aria-label="Direct link to indexerconfig" title="Direct link to indexerconfig" translate="no">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>kvBlockIndexConfig</code></td><td style="text-align:left"><a href="#kvblockindexconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for the KV-block index backend.</td></tr><tr><td style="text-align:left"><code>tokenizersPoolConfig</code></td><td style="text-align:left"><a href="#tokenizerspoolconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for the tokenizers pool.</td></tr><tr><td style="text-align:left"><code>enableMetrics</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left"><code>false</code></td><td style="text-align:left">Whether to enable metrics for the indexer.</td></tr><tr><td style="text-align:left"><code>metricsLoggingInterval</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>0s</code></td><td style="text-align:left">Interval for logging metrics (e.g., &quot;10s&quot;).</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kvblockindexconfig"><code>kvBlockIndexConfig</code><a href="#kvblockindexconfig" class="hash-link" aria-label="Direct link to kvblockindexconfig" title="Direct link to kvblockindexconfig" translate="no">â€‹</a></h4>
<p>Only one of the following backends should be configured.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>inMemoryConfig</code></td><td style="text-align:left"><a href="#inmemoryconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for in-memory index.</td></tr><tr><td style="text-align:left"><code>redisConfig</code></td><td style="text-align:left"><a href="#redisconfig--valkeyconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for Redis index.</td></tr><tr><td style="text-align:left"><code>valkeyConfig</code></td><td style="text-align:left"><a href="#redisconfig--valkeyconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for Valkey index.</td></tr><tr><td style="text-align:left"><code>costAwareMemoryConfig</code></td><td style="text-align:left"><a href="#costawarememoryconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for cost-aware memory index.</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="inmemoryconfig"><code>inMemoryConfig</code><a href="#inmemoryconfig" class="hash-link" aria-label="Direct link to inmemoryconfig" title="Direct link to inmemoryconfig" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>size</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>1e8</code></td><td style="text-align:left">Maximum number of keys in the index.</td></tr><tr><td style="text-align:left"><code>podCacheSize</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>10</code></td><td style="text-align:left">Maximum number of pod entries per key.</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="redisconfig--valkeyconfig"><code>redisConfig</code> / <code>valkeyConfig</code><a href="#redisconfig--valkeyconfig" class="hash-link" aria-label="Direct link to redisconfig--valkeyconfig" title="Direct link to redisconfig--valkeyconfig" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>address</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;redis://127.0.0.1:6379&quot;</code></td><td style="text-align:left">Address of the Redis/Valkey server.</td></tr><tr><td style="text-align:left"><code>backendType</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;redis&quot;</code></td><td style="text-align:left">Backend type (&quot;redis&quot; or &quot;valkey&quot;).</td></tr><tr><td style="text-align:left"><code>enableRDMA</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left"><code>false</code></td><td style="text-align:left">Enable RDMA (experimental, Valkey only).</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="costawarememoryconfig"><code>costAwareMemoryConfig</code><a href="#costawarememoryconfig" class="hash-link" aria-label="Direct link to costawarememoryconfig" title="Direct link to costawarememoryconfig" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>size</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;2GiB&quot;</code></td><td style="text-align:left">Maximum memory size (e.g., &quot;2GiB&quot;, &quot;500MiB&quot;).</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="tokenizerspoolconfig"><code>tokenizersPoolConfig</code><a href="#tokenizerspoolconfig" class="hash-link" aria-label="Direct link to tokenizerspoolconfig" title="Direct link to tokenizerspoolconfig" translate="no">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>modelName</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">-</td><td style="text-align:left">Base model name for the tokenizer. (Required)</td></tr><tr><td style="text-align:left"><code>workersCount</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>5</code></td><td style="text-align:left">Number of concurrent tokenizer workers.</td></tr><tr><td style="text-align:left"><code>hf</code></td><td style="text-align:left"><a href="#hf-huggingface-tokenizer" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for HuggingFace tokenizer.</td></tr><tr><td style="text-align:left"><code>local</code></td><td style="text-align:left"><a href="#local-local-tokenizer" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for local tokenizer.</td></tr><tr><td style="text-align:left"><code>uds</code></td><td style="text-align:left"><a href="#uds-uds-tokenizer" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for UDS-based tokenizer.</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="hf-huggingface-tokenizer"><code>hf</code> (HuggingFace Tokenizer)<a href="#hf-huggingface-tokenizer" class="hash-link" aria-label="Direct link to hf-huggingface-tokenizer" title="Direct link to hf-huggingface-tokenizer" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>enabled</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left"><code>true</code></td><td style="text-align:left">Enable HuggingFace tokenizer.</td></tr><tr><td style="text-align:left"><code>huggingFaceToken</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;&quot;</code></td><td style="text-align:left">HuggingFace API token.</td></tr><tr><td style="text-align:left"><code>tokenizersCacheDir</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>bin</code></td><td style="text-align:left">Directory to cache downloaded tokenizers.</td></tr><tr><td style="text-align:left"><code>tokenizer</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;&quot;</code></td><td style="text-align:left">Specific tokenizer to use (defaults to model name).</td></tr><tr><td style="text-align:left"><code>tokenizerMode</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;auto&quot;</code></td><td style="text-align:left">Tokenizer mode (&quot;auto&quot;, &quot;hf&quot;, &quot;limit&quot;, &quot;mistral&quot;).</td></tr><tr><td style="text-align:left"><code>tokenizerRevision</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;&quot;</code></td><td style="text-align:left">Revision of the tokenizer.</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="local-local-tokenizer"><code>local</code> (Local Tokenizer)<a href="#local-local-tokenizer" class="hash-link" aria-label="Direct link to local-local-tokenizer" title="Direct link to local-local-tokenizer" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>autoDiscoveryDir</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>/mnt/models</code></td><td style="text-align:left">Directory to search for tokenizers.</td></tr><tr><td style="text-align:left"><code>autoDiscoveryTokenizerFileName</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>tokenizer.json</code></td><td style="text-align:left">Filename to search for.</td></tr><tr><td style="text-align:left"><code>modelTokenizerMap</code></td><td style="text-align:left"><code>map[string]string</code></td><td style="text-align:left">-</td><td style="text-align:left">Manual mapping of model names to tokenizer paths.</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="uds-uds-tokenizer"><code>uds</code> (UDS Tokenizer)<a href="#uds-uds-tokenizer" class="hash-link" aria-label="Direct link to uds-uds-tokenizer" title="Direct link to uds-uds-tokenizer" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>socketFile</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>/tmp/tokenizer/tokenizer-uds.socket</code></td><td style="text-align:left">Path to the UDS socket file.</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kveventsconfig"><code>kvEventsConfig</code><a href="#kveventsconfig" class="hash-link" aria-label="Direct link to kveventsconfig" title="Direct link to kveventsconfig" translate="no">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>zmqEndpoint</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">-</td><td style="text-align:left">ZMQ endpoint to connect to (e.g., &quot;tcp://indexer:5557&quot;).</td></tr><tr><td style="text-align:left"><code>topicFilter</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;kv@&quot;</code></td><td style="text-align:left">ZMQ topic filter subscription.</td></tr><tr><td style="text-align:left"><code>concurrency</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>4</code></td><td style="text-align:left">Number of event processing workers.</td></tr><tr><td style="text-align:left"><code>discoverPods</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left"><code>true</code></td><td style="text-align:left">Enable automatic pod discovery.</td></tr><tr><td style="text-align:left"><code>podDiscoveryConfig</code></td><td style="text-align:left"><a href="#poddiscoveryconfig" class=""><code>Object</code></a></td><td style="text-align:left">-</td><td style="text-align:left">Configuration for pod discovery.</td></tr></tbody></table>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="poddiscoveryconfig"><code>podDiscoveryConfig</code><a href="#poddiscoveryconfig" class="hash-link" aria-label="Direct link to poddiscoveryconfig" title="Direct link to poddiscoveryconfig" translate="no">â€‹</a></h5>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>podLabelSelector</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;llm-d.ai/inferenceServing=true&quot;</code></td><td style="text-align:left">Label selector to find pods.</td></tr><tr><td style="text-align:left"><code>podNamespace</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>&quot;&quot;</code></td><td style="text-align:left">Namespace to watch pods in (empty = all).</td></tr><tr><td style="text-align:left"><code>socketPort</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>5557</code></td><td style="text-align:left">Port where pods expose their ZMQ socket.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="session-affinity-scorer"><code>session-affinity-scorer</code><a href="#session-affinity-scorer" class="hash-link" aria-label="Direct link to session-affinity-scorer" title="Direct link to session-affinity-scorer" translate="no">â€‹</a></h3>
<p>Routes subsequent requests in a session to the same pod as the first request.</p>
<p>This scorer relies on the <code>x-session-token</code> HTTP header to maintain session affinity:</p>
<ol>
<li class=""><strong>Response:</strong> When a request is served, the plugin sets the <code>x-session-token</code> header in the response with the Base64-encoded name of the serving pod.</li>
<li class=""><strong>Request:</strong> For subsequent requests, the client must include this <code>x-session-token</code> header. The scorer decodes it to identify the target pod and assigns it a high score.</li>
</ol>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kv-cache-utilization-scorer"><code>kv-cache-utilization-scorer</code><a href="#kv-cache-utilization-scorer" class="hash-link" aria-label="Direct link to kv-cache-utilization-scorer" title="Direct link to kv-cache-utilization-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on their KV cache utilization (lower utilization = higher score).</p>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lora-affinity-scorer"><code>lora-affinity-scorer</code><a href="#lora-affinity-scorer" class="hash-link" aria-label="Direct link to lora-affinity-scorer" title="Direct link to lora-affinity-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on LoRA adapter availability and capacity.</p>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="queue-scorer"><code>queue-scorer</code><a href="#queue-scorer" class="hash-link" aria-label="Direct link to queue-scorer" title="Direct link to queue-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on their waiting queue size (smaller queue = higher score).</p>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="running-requests-size-scorer"><code>running-requests-size-scorer</code><a href="#running-requests-size-scorer" class="hash-link" aria-label="Direct link to running-requests-size-scorer" title="Direct link to running-requests-size-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on their number of running requests.</p>
<p>No parameters.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="prefix-cache-scorer"><code>prefix-cache-scorer</code><a href="#prefix-cache-scorer" class="hash-link" aria-label="Direct link to prefix-cache-scorer" title="Direct link to prefix-cache-scorer" translate="no">â€‹</a></h3>
<p>Scores pods based on the length of the prefix match for the request prompt.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>autoTune</code></td><td style="text-align:left"><code>bool</code></td><td style="text-align:left"><code>true</code></td><td style="text-align:left">Whether to automatically tune configuration based on metrics.</td></tr><tr><td style="text-align:left"><code>blockSize</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>64</code></td><td style="text-align:left">Size of a token block for hashing.</td></tr><tr><td style="text-align:left"><code>maxPrefixBlocksToMatch</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>256</code></td><td style="text-align:left">Maximum number of blocks to match for prefix caching.</td></tr><tr><td style="text-align:left"><code>lruCapacityPerServer</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>31250</code></td><td style="text-align:left">Estimated LRU capacity per model server (in blocks).</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pickers">Pickers<a href="#pickers" class="hash-link" aria-label="Direct link to Pickers" title="Direct link to Pickers" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="max-score-picker"><code>max-score-picker</code><a href="#max-score-picker" class="hash-link" aria-label="Direct link to max-score-picker" title="Direct link to max-score-picker" translate="no">â€‹</a></h3>
<p>Picks the pod(s) with the maximum score from the list of candidates.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>maxNumOfEndpoints</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>1</code></td><td style="text-align:left">Maximum number of endpoints to pick.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="random-picker"><code>random-picker</code><a href="#random-picker" class="hash-link" aria-label="Direct link to random-picker" title="Direct link to random-picker" translate="no">â€‹</a></h3>
<p>Picks random pod(s) from the candidates.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>maxNumOfEndpoints</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>1</code></td><td style="text-align:left">Maximum number of endpoints to pick.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="weighted-random-picker"><code>weighted-random-picker</code><a href="#weighted-random-picker" class="hash-link" aria-label="Direct link to weighted-random-picker" title="Direct link to weighted-random-picker" translate="no">â€‹</a></h3>
<p>Picks pod(s) based on weighted random sampling derived from their scores.</p>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Type</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>maxNumOfEndpoints</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left"><code>1</code></td><td style="text-align:left">Maximum number of endpoints to pick.</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="response-plugins">Response plugins<a href="#response-plugins" class="hash-link" aria-label="Direct link to Response plugins" title="Direct link to Response plugins" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="response-header-handler"><code>response-header-handler</code><a href="#response-header-handler" class="hash-link" aria-label="Direct link to response-header-handler" title="Direct link to response-header-handler" translate="no">â€‹</a></h3>
<p>Adds serving pod information to the response headers.</p>
<ul>
<li class=""><code>x-decoder-host-port</code>: Always set to the address and port of the pod that handled the decode phase (the primary target).</li>
<li class=""><code>x-prefiller-host-port</code>: Set to the address and port of the prefill pod, if a separate prefill pod was used (PD disaggregation).</li>
</ul>
<p>No configuration parameters.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/dev/reference/heimdall/api-reference/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">API Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/dev/reference/odin/api-reference/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#profile-handlers" class="table-of-contents__link toc-highlight">Profile handlers</a><ul><li><a href="#single-profile-handler" class="table-of-contents__link toc-highlight"><code>single-profile-handler</code></a></li><li><a href="#pd-profile-handler" class="table-of-contents__link toc-highlight"><code>pd-profile-handler</code></a></li></ul></li><li><a href="#filters" class="table-of-contents__link toc-highlight">Filters</a><ul><li><a href="#by-label" class="table-of-contents__link toc-highlight"><code>by-label</code></a></li><li><a href="#by-label-selector" class="table-of-contents__link toc-highlight"><code>by-label-selector</code></a></li><li><a href="#prefill-filter" class="table-of-contents__link toc-highlight"><code>prefill-filter</code></a></li><li><a href="#decode-filter" class="table-of-contents__link toc-highlight"><code>decode-filter</code></a></li></ul></li><li><a href="#scorers" class="table-of-contents__link toc-highlight">Scorers</a><ul><li><a href="#active-request-scorer" class="table-of-contents__link toc-highlight"><code>active-request-scorer</code></a></li><li><a href="#load-aware-scorer" class="table-of-contents__link toc-highlight"><code>load-aware-scorer</code></a></li><li><a href="#no-hit-lru-scorer" class="table-of-contents__link toc-highlight"><code>no-hit-lru-scorer</code></a></li><li><a href="#precise-prefix-cache-scorer" class="table-of-contents__link toc-highlight"><code>precise-prefix-cache-scorer</code></a></li><li><a href="#session-affinity-scorer" class="table-of-contents__link toc-highlight"><code>session-affinity-scorer</code></a></li><li><a href="#kv-cache-utilization-scorer" class="table-of-contents__link toc-highlight"><code>kv-cache-utilization-scorer</code></a></li><li><a href="#lora-affinity-scorer" class="table-of-contents__link toc-highlight"><code>lora-affinity-scorer</code></a></li><li><a href="#queue-scorer" class="table-of-contents__link toc-highlight"><code>queue-scorer</code></a></li><li><a href="#running-requests-size-scorer" class="table-of-contents__link toc-highlight"><code>running-requests-size-scorer</code></a></li><li><a href="#prefix-cache-scorer" class="table-of-contents__link toc-highlight"><code>prefix-cache-scorer</code></a></li></ul></li><li><a href="#pickers" class="table-of-contents__link toc-highlight">Pickers</a><ul><li><a href="#max-score-picker" class="table-of-contents__link toc-highlight"><code>max-score-picker</code></a></li><li><a href="#random-picker" class="table-of-contents__link toc-highlight"><code>random-picker</code></a></li><li><a href="#weighted-random-picker" class="table-of-contents__link toc-highlight"><code>weighted-random-picker</code></a></li></ul></li><li><a href="#response-plugins" class="table-of-contents__link toc-highlight">Response plugins</a><ul><li><a href="#response-header-handler" class="table-of-contents__link toc-highlight"><code>response-header-handler</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Â© Copyright 2026 Moreh, Inc. All rights reserved.</div></div></div></footer></div>
</body>
</html>